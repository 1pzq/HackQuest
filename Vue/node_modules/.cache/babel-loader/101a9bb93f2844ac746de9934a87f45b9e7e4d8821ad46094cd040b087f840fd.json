{"ast":null,"code":"import _slicedToArray from \"/Users/puzhiqiu/\\u5DE5\\u7A0B\\u9879\\u76EE/HackQuest/HackQuest/vue/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { defineComponent, nextTick, onUnmounted, ref, watch, watchEffect } from \"vue\";\nimport { extend, truthProp, numericProp, createNamespace, getZIndexStyle, makeNumberProp, makeNumericProp, makeStringProp } from \"../utils/index.mjs\";\nvar _createNamespace = createNamespace(\"watermark\"),\n  _createNamespace2 = _slicedToArray(_createNamespace, 2),\n  name = _createNamespace2[0],\n  bem = _createNamespace2[1];\nvar watermarkProps = {\n  gapX: makeNumberProp(0),\n  gapY: makeNumberProp(0),\n  image: String,\n  width: makeNumberProp(100),\n  height: makeNumberProp(100),\n  rotate: makeNumericProp(-22),\n  zIndex: numericProp,\n  content: String,\n  opacity: numericProp,\n  fullPage: truthProp,\n  textColor: makeStringProp(\"#dcdee0\")\n};\nvar stdin_default = defineComponent({\n  name: name,\n  props: watermarkProps,\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots;\n    var svgElRef = ref();\n    var watermarkUrl = ref(\"\");\n    var imageBase64 = ref(\"\");\n    var renderWatermark = function renderWatermark() {\n      var rotateStyle = {\n        transformOrigin: \"center\",\n        transform: \"rotate(\".concat(props.rotate, \"deg)\")\n      };\n      var svgInner = function svgInner() {\n        if (props.image && !slots.content) {\n          return _createVNode(\"image\", {\n            \"href\": imageBase64.value,\n            \"xlink:href\": imageBase64.value,\n            \"x\": \"0\",\n            \"y\": \"0\",\n            \"width\": props.width,\n            \"height\": props.height,\n            \"style\": rotateStyle\n          }, null);\n        }\n        return _createVNode(\"foreignObject\", {\n          \"x\": \"0\",\n          \"y\": \"0\",\n          \"width\": props.width,\n          \"height\": props.height\n        }, [_createVNode(\"div\", {\n          \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n          \"style\": rotateStyle\n        }, [slots.content ? slots.content() : _createVNode(\"span\", {\n          \"style\": {\n            color: props.textColor\n          }\n        }, [props.content])])]);\n      };\n      var svgWidth = props.width + props.gapX;\n      var svgHeight = props.height + props.gapY;\n      return _createVNode(\"svg\", {\n        \"viewBox\": \"0 0 \".concat(svgWidth, \" \").concat(svgHeight),\n        \"width\": svgWidth,\n        \"height\": svgHeight,\n        \"xmlns\": \"http://www.w3.org/2000/svg\",\n        \"xmlns:xlink\": \"http://www.w3.org/1999/xlink\",\n        \"style\": {\n          padding: \"0 \".concat(props.gapX, \"px \").concat(props.gapY, \"px 0\"),\n          opacity: props.opacity\n        }\n      }, [svgInner()]);\n    };\n    var makeImageToBase64 = function makeImageToBase64(url) {\n      var canvas = document.createElement(\"canvas\");\n      var image = new Image();\n      image.crossOrigin = \"anonymous\";\n      image.referrerPolicy = \"no-referrer\";\n      image.onload = function () {\n        canvas.width = image.naturalWidth;\n        canvas.height = image.naturalHeight;\n        var ctx = canvas.getContext(\"2d\");\n        ctx == null ? void 0 : ctx.drawImage(image, 0, 0);\n        imageBase64.value = canvas.toDataURL();\n      };\n      image.src = url;\n    };\n    var makeSvgToBlobUrl = function makeSvgToBlobUrl(svgStr) {\n      var svgBlob = new Blob([svgStr], {\n        type: \"image/svg+xml\"\n      });\n      return URL.createObjectURL(svgBlob);\n    };\n    watchEffect(function () {\n      if (props.image) {\n        makeImageToBase64(props.image);\n      }\n    });\n    watch(function () {\n      return [imageBase64.value, props.content, props.textColor, props.height, props.width, props.rotate, props.gapX, props.gapY];\n    }, function () {\n      nextTick(function () {\n        if (svgElRef.value) {\n          if (watermarkUrl.value) {\n            URL.revokeObjectURL(watermarkUrl.value);\n          }\n          watermarkUrl.value = makeSvgToBlobUrl(svgElRef.value.innerHTML);\n        }\n      });\n    }, {\n      immediate: true\n    });\n    onUnmounted(function () {\n      if (watermarkUrl.value) {\n        URL.revokeObjectURL(watermarkUrl.value);\n      }\n    });\n    return function () {\n      var style = extend({\n        backgroundImage: \"url(\".concat(watermarkUrl.value, \")\")\n      }, getZIndexStyle(props.zIndex));\n      return _createVNode(\"div\", {\n        \"class\": bem({\n          full: props.fullPage\n        }),\n        \"style\": style\n      }, [_createVNode(\"div\", {\n        \"class\": bem(\"wrapper\"),\n        \"ref\": svgElRef\n      }, [renderWatermark()])]);\n    };\n  }\n});\nexport { stdin_default as default, watermarkProps };","map":{"version":3,"names":["createVNode","_createVNode","defineComponent","nextTick","onUnmounted","ref","watch","watchEffect","extend","truthProp","numericProp","createNamespace","getZIndexStyle","makeNumberProp","makeNumericProp","makeStringProp","name","bem","watermarkProps","gapX","gapY","image","String","width","height","rotate","zIndex","content","opacity","fullPage","textColor","stdin_default","props","setup","slots","svgElRef","watermarkUrl","imageBase64","renderWatermark","rotateStyle","transformOrigin","transform","svgInner","value","color","svgWidth","svgHeight","padding","makeImageToBase64","url","canvas","document","createElement","Image","crossOrigin","referrerPolicy","onload","naturalWidth","naturalHeight","ctx","getContext","drawImage","toDataURL","src","makeSvgToBlobUrl","svgStr","svgBlob","Blob","type","URL","createObjectURL","revokeObjectURL","innerHTML","immediate","style","backgroundImage","full","default"],"sources":["/Users/puzhiqiu/工程项目/HackQuest/HackQuest/vue/node_modules/vant/es/watermark/Watermark.mjs"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport { defineComponent, nextTick, onUnmounted, ref, watch, watchEffect } from \"vue\";\nimport { extend, truthProp, numericProp, createNamespace, getZIndexStyle, makeNumberProp, makeNumericProp, makeStringProp } from \"../utils/index.mjs\";\nconst [name, bem] = createNamespace(\"watermark\");\nconst watermarkProps = {\n  gapX: makeNumberProp(0),\n  gapY: makeNumberProp(0),\n  image: String,\n  width: makeNumberProp(100),\n  height: makeNumberProp(100),\n  rotate: makeNumericProp(-22),\n  zIndex: numericProp,\n  content: String,\n  opacity: numericProp,\n  fullPage: truthProp,\n  textColor: makeStringProp(\"#dcdee0\")\n};\nvar stdin_default = defineComponent({\n  name,\n  props: watermarkProps,\n  setup(props, {\n    slots\n  }) {\n    const svgElRef = ref();\n    const watermarkUrl = ref(\"\");\n    const imageBase64 = ref(\"\");\n    const renderWatermark = () => {\n      const rotateStyle = {\n        transformOrigin: \"center\",\n        transform: `rotate(${props.rotate}deg)`\n      };\n      const svgInner = () => {\n        if (props.image && !slots.content) {\n          return _createVNode(\"image\", {\n            \"href\": imageBase64.value,\n            \"xlink:href\": imageBase64.value,\n            \"x\": \"0\",\n            \"y\": \"0\",\n            \"width\": props.width,\n            \"height\": props.height,\n            \"style\": rotateStyle\n          }, null);\n        }\n        return _createVNode(\"foreignObject\", {\n          \"x\": \"0\",\n          \"y\": \"0\",\n          \"width\": props.width,\n          \"height\": props.height\n        }, [_createVNode(\"div\", {\n          \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n          \"style\": rotateStyle\n        }, [slots.content ? slots.content() : _createVNode(\"span\", {\n          \"style\": {\n            color: props.textColor\n          }\n        }, [props.content])])]);\n      };\n      const svgWidth = props.width + props.gapX;\n      const svgHeight = props.height + props.gapY;\n      return _createVNode(\"svg\", {\n        \"viewBox\": `0 0 ${svgWidth} ${svgHeight}`,\n        \"width\": svgWidth,\n        \"height\": svgHeight,\n        \"xmlns\": \"http://www.w3.org/2000/svg\",\n        \"xmlns:xlink\": \"http://www.w3.org/1999/xlink\",\n        \"style\": {\n          padding: `0 ${props.gapX}px ${props.gapY}px 0`,\n          opacity: props.opacity\n        }\n      }, [svgInner()]);\n    };\n    const makeImageToBase64 = (url) => {\n      const canvas = document.createElement(\"canvas\");\n      const image = new Image();\n      image.crossOrigin = \"anonymous\";\n      image.referrerPolicy = \"no-referrer\";\n      image.onload = () => {\n        canvas.width = image.naturalWidth;\n        canvas.height = image.naturalHeight;\n        const ctx = canvas.getContext(\"2d\");\n        ctx == null ? void 0 : ctx.drawImage(image, 0, 0);\n        imageBase64.value = canvas.toDataURL();\n      };\n      image.src = url;\n    };\n    const makeSvgToBlobUrl = (svgStr) => {\n      const svgBlob = new Blob([svgStr], {\n        type: \"image/svg+xml\"\n      });\n      return URL.createObjectURL(svgBlob);\n    };\n    watchEffect(() => {\n      if (props.image) {\n        makeImageToBase64(props.image);\n      }\n    });\n    watch(() => [imageBase64.value, props.content, props.textColor, props.height, props.width, props.rotate, props.gapX, props.gapY], () => {\n      nextTick(() => {\n        if (svgElRef.value) {\n          if (watermarkUrl.value) {\n            URL.revokeObjectURL(watermarkUrl.value);\n          }\n          watermarkUrl.value = makeSvgToBlobUrl(svgElRef.value.innerHTML);\n        }\n      });\n    }, {\n      immediate: true\n    });\n    onUnmounted(() => {\n      if (watermarkUrl.value) {\n        URL.revokeObjectURL(watermarkUrl.value);\n      }\n    });\n    return () => {\n      const style = extend({\n        backgroundImage: `url(${watermarkUrl.value})`\n      }, getZIndexStyle(props.zIndex));\n      return _createVNode(\"div\", {\n        \"class\": bem({\n          full: props.fullPage\n        }),\n        \"style\": style\n      }, [_createVNode(\"div\", {\n        \"class\": bem(\"wrapper\"),\n        \"ref\": svgElRef\n      }, [renderWatermark()])]);\n    };\n  }\n});\nexport {\n  stdin_default as default,\n  watermarkProps\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}