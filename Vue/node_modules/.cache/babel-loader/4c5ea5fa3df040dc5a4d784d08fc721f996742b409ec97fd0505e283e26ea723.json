{"ast":null,"code":"import _classCallCheck from \"/Users/puzhiqiu/\\u5DE5\\u7A0B\\u9879\\u76EE/HackQuest/web3-vote/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/puzhiqiu/\\u5DE5\\u7A0B\\u9879\\u76EE/HackQuest/web3-vote/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport { remove } from \"./util.mjs\";\nvar defaultOptions = {\n  selector: \"img\"\n};\nvar LazyContainer = /*#__PURE__*/function () {\n  function LazyContainer(_ref) {\n    var el = _ref.el,\n      binding = _ref.binding,\n      vnode = _ref.vnode,\n      lazy = _ref.lazy;\n    _classCallCheck(this, LazyContainer);\n    this.el = null;\n    this.vnode = vnode;\n    this.binding = binding;\n    this.options = {};\n    this.lazy = lazy;\n    this.queue = [];\n    this.update({\n      el: el,\n      binding: binding\n    });\n  }\n  _createClass(LazyContainer, [{\n    key: \"update\",\n    value: function update(_ref2) {\n      var _this = this;\n      var el = _ref2.el,\n        binding = _ref2.binding;\n      this.el = el;\n      this.options = Object.assign({}, defaultOptions, binding.value);\n      var imgs = this.getImgs();\n      imgs.forEach(function (el2) {\n        _this.lazy.add(el2, Object.assign({}, _this.binding, {\n          value: {\n            src: \"dataset\" in el2 ? el2.dataset.src : el2.getAttribute(\"data-src\"),\n            error: (\"dataset\" in el2 ? el2.dataset.error : el2.getAttribute(\"data-error\")) || _this.options.error,\n            loading: (\"dataset\" in el2 ? el2.dataset.loading : el2.getAttribute(\"data-loading\")) || _this.options.loading\n          }\n        }), _this.vnode);\n      });\n    }\n  }, {\n    key: \"getImgs\",\n    value: function getImgs() {\n      return Array.from(this.el.querySelectorAll(this.options.selector));\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _this2 = this;\n      var imgs = this.getImgs();\n      imgs.forEach(function (el) {\n        return _this2.lazy.remove(el);\n      });\n      this.vnode = null;\n      this.binding = null;\n      this.lazy = null;\n    }\n  }]);\n  return LazyContainer;\n}();\nvar LazyContainerManager = /*#__PURE__*/function () {\n  function LazyContainerManager(_ref3) {\n    var lazy = _ref3.lazy;\n    _classCallCheck(this, LazyContainerManager);\n    this.lazy = lazy;\n    this.queue = [];\n  }\n  _createClass(LazyContainerManager, [{\n    key: \"bind\",\n    value: function bind(el, binding, vnode) {\n      var container = new LazyContainer({\n        el: el,\n        binding: binding,\n        vnode: vnode,\n        lazy: this.lazy\n      });\n      this.queue.push(container);\n    }\n  }, {\n    key: \"update\",\n    value: function update(el, binding, vnode) {\n      var container = this.queue.find(function (item) {\n        return item.el === el;\n      });\n      if (!container) return;\n      container.update({\n        el: el,\n        binding: binding,\n        vnode: vnode\n      });\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind(el) {\n      var container = this.queue.find(function (item) {\n        return item.el === el;\n      });\n      if (!container) return;\n      container.clear();\n      remove(this.queue, container);\n    }\n  }]);\n  return LazyContainerManager;\n}();\nexport { LazyContainerManager as default };","map":{"version":3,"names":["remove","defaultOptions","selector","LazyContainer","el","binding","vnode","lazy","options","queue","update","Object","assign","value","imgs","getImgs","forEach","el2","add","src","dataset","getAttribute","error","loading","Array","from","querySelectorAll","LazyContainerManager","container","push","find","item","clear","default"],"sources":["/Users/puzhiqiu/工程项目/HackQuest/web3-vote/node_modules/vant/es/lazyload/vue-lazyload/lazy-container.mjs"],"sourcesContent":["import { remove } from \"./util.mjs\";\nconst defaultOptions = {\n  selector: \"img\"\n};\nclass LazyContainer {\n  constructor({ el, binding, vnode, lazy }) {\n    this.el = null;\n    this.vnode = vnode;\n    this.binding = binding;\n    this.options = {};\n    this.lazy = lazy;\n    this.queue = [];\n    this.update({ el, binding });\n  }\n  update({ el, binding }) {\n    this.el = el;\n    this.options = Object.assign({}, defaultOptions, binding.value);\n    const imgs = this.getImgs();\n    imgs.forEach((el2) => {\n      this.lazy.add(\n        el2,\n        Object.assign({}, this.binding, {\n          value: {\n            src: \"dataset\" in el2 ? el2.dataset.src : el2.getAttribute(\"data-src\"),\n            error: (\"dataset\" in el2 ? el2.dataset.error : el2.getAttribute(\"data-error\")) || this.options.error,\n            loading: (\"dataset\" in el2 ? el2.dataset.loading : el2.getAttribute(\"data-loading\")) || this.options.loading\n          }\n        }),\n        this.vnode\n      );\n    });\n  }\n  getImgs() {\n    return Array.from(this.el.querySelectorAll(this.options.selector));\n  }\n  clear() {\n    const imgs = this.getImgs();\n    imgs.forEach((el) => this.lazy.remove(el));\n    this.vnode = null;\n    this.binding = null;\n    this.lazy = null;\n  }\n}\nclass LazyContainerManager {\n  constructor({ lazy }) {\n    this.lazy = lazy;\n    this.queue = [];\n  }\n  bind(el, binding, vnode) {\n    const container = new LazyContainer({\n      el,\n      binding,\n      vnode,\n      lazy: this.lazy\n    });\n    this.queue.push(container);\n  }\n  update(el, binding, vnode) {\n    const container = this.queue.find((item) => item.el === el);\n    if (!container)\n      return;\n    container.update({ el, binding, vnode });\n  }\n  unbind(el) {\n    const container = this.queue.find((item) => item.el === el);\n    if (!container)\n      return;\n    container.clear();\n    remove(this.queue, container);\n  }\n}\nexport {\n  LazyContainerManager as default\n};\n"],"mappings":";;;;;;;;;AAAA,SAASA,MAAM,QAAQ,YAAY;AACnC,IAAMC,cAAc,GAAG;EACrBC,QAAQ,EAAE;AACZ,CAAC;AAAC,IACIC,aAAa;EACjB,6BAA0C;IAAA,IAA5BC,EAAE,QAAFA,EAAE;MAAEC,OAAO,QAAPA,OAAO;MAAEC,KAAK,QAALA,KAAK;MAAEC,IAAI,QAAJA,IAAI;IAAA;IACpC,IAAI,CAACH,EAAE,GAAG,IAAI;IACd,IAAI,CAACE,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACD,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACG,OAAO,GAAG,CAAC,CAAC;IACjB,IAAI,CAACD,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACE,KAAK,GAAG,EAAE;IACf,IAAI,CAACC,MAAM,CAAC;MAAEN,EAAE,EAAFA,EAAE;MAAEC,OAAO,EAAPA;IAAQ,CAAC,CAAC;EAC9B;EAAC;IAAA;IAAA,OACD,uBAAwB;MAAA;MAAA,IAAfD,EAAE,SAAFA,EAAE;QAAEC,OAAO,SAAPA,OAAO;MAClB,IAAI,CAACD,EAAE,GAAGA,EAAE;MACZ,IAAI,CAACI,OAAO,GAAGG,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEX,cAAc,EAAEI,OAAO,CAACQ,KAAK,CAAC;MAC/D,IAAMC,IAAI,GAAG,IAAI,CAACC,OAAO,EAAE;MAC3BD,IAAI,CAACE,OAAO,CAAC,UAACC,GAAG,EAAK;QACpB,KAAI,CAACV,IAAI,CAACW,GAAG,CACXD,GAAG,EACHN,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE,KAAI,CAACP,OAAO,EAAE;UAC9BQ,KAAK,EAAE;YACLM,GAAG,EAAE,SAAS,IAAIF,GAAG,GAAGA,GAAG,CAACG,OAAO,CAACD,GAAG,GAAGF,GAAG,CAACI,YAAY,CAAC,UAAU,CAAC;YACtEC,KAAK,EAAE,CAAC,SAAS,IAAIL,GAAG,GAAGA,GAAG,CAACG,OAAO,CAACE,KAAK,GAAGL,GAAG,CAACI,YAAY,CAAC,YAAY,CAAC,KAAK,KAAI,CAACb,OAAO,CAACc,KAAK;YACpGC,OAAO,EAAE,CAAC,SAAS,IAAIN,GAAG,GAAGA,GAAG,CAACG,OAAO,CAACG,OAAO,GAAGN,GAAG,CAACI,YAAY,CAAC,cAAc,CAAC,KAAK,KAAI,CAACb,OAAO,CAACe;UACvG;QACF,CAAC,CAAC,EACF,KAAI,CAACjB,KAAK,CACX;MACH,CAAC,CAAC;IACJ;EAAC;IAAA;IAAA,OACD,mBAAU;MACR,OAAOkB,KAAK,CAACC,IAAI,CAAC,IAAI,CAACrB,EAAE,CAACsB,gBAAgB,CAAC,IAAI,CAAClB,OAAO,CAACN,QAAQ,CAAC,CAAC;IACpE;EAAC;IAAA;IAAA,OACD,iBAAQ;MAAA;MACN,IAAMY,IAAI,GAAG,IAAI,CAACC,OAAO,EAAE;MAC3BD,IAAI,CAACE,OAAO,CAAC,UAACZ,EAAE;QAAA,OAAK,MAAI,CAACG,IAAI,CAACP,MAAM,CAACI,EAAE,CAAC;MAAA,EAAC;MAC1C,IAAI,CAACE,KAAK,GAAG,IAAI;MACjB,IAAI,CAACD,OAAO,GAAG,IAAI;MACnB,IAAI,CAACE,IAAI,GAAG,IAAI;IAClB;EAAC;EAAA;AAAA;AAAA,IAEGoB,oBAAoB;EACxB,qCAAsB;IAAA,IAARpB,IAAI,SAAJA,IAAI;IAAA;IAChB,IAAI,CAACA,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACE,KAAK,GAAG,EAAE;EACjB;EAAC;IAAA;IAAA,OACD,cAAKL,EAAE,EAAEC,OAAO,EAAEC,KAAK,EAAE;MACvB,IAAMsB,SAAS,GAAG,IAAIzB,aAAa,CAAC;QAClCC,EAAE,EAAFA,EAAE;QACFC,OAAO,EAAPA,OAAO;QACPC,KAAK,EAALA,KAAK;QACLC,IAAI,EAAE,IAAI,CAACA;MACb,CAAC,CAAC;MACF,IAAI,CAACE,KAAK,CAACoB,IAAI,CAACD,SAAS,CAAC;IAC5B;EAAC;IAAA;IAAA,OACD,gBAAOxB,EAAE,EAAEC,OAAO,EAAEC,KAAK,EAAE;MACzB,IAAMsB,SAAS,GAAG,IAAI,CAACnB,KAAK,CAACqB,IAAI,CAAC,UAACC,IAAI;QAAA,OAAKA,IAAI,CAAC3B,EAAE,KAAKA,EAAE;MAAA,EAAC;MAC3D,IAAI,CAACwB,SAAS,EACZ;MACFA,SAAS,CAAClB,MAAM,CAAC;QAAEN,EAAE,EAAFA,EAAE;QAAEC,OAAO,EAAPA,OAAO;QAAEC,KAAK,EAALA;MAAM,CAAC,CAAC;IAC1C;EAAC;IAAA;IAAA,OACD,gBAAOF,EAAE,EAAE;MACT,IAAMwB,SAAS,GAAG,IAAI,CAACnB,KAAK,CAACqB,IAAI,CAAC,UAACC,IAAI;QAAA,OAAKA,IAAI,CAAC3B,EAAE,KAAKA,EAAE;MAAA,EAAC;MAC3D,IAAI,CAACwB,SAAS,EACZ;MACFA,SAAS,CAACI,KAAK,EAAE;MACjBhC,MAAM,CAAC,IAAI,CAACS,KAAK,EAAEmB,SAAS,CAAC;IAC/B;EAAC;EAAA;AAAA;AAEH,SACED,oBAAoB,IAAIM,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}